(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[895],{205:(t,e,r)=>{"use strict";r.d(e,{Y:()=>c});var a=r(858),o=r(2115);function c(t){let[e,r]=(0,o.useState)(null);return(0,o.useEffect)(()=>{if(!t)return;let e=(0,a.c7)(),o=(0,a.KR)(e,t);(0,a.qk)(o).then(t=>r(t)).catch(()=>r(null))},[t]),e}},2218:(t,e,r)=>{"use strict";r.d(e,{Ay:()=>l,NS:()=>i,n:()=>d,n2:()=>n});let a=(0,r(1990).Z0)({name:"ui",initialState:{modalOpen:!1,editingProduct:null,cartOpen:!1},reducers:{openModal(t,e){t.modalOpen=!0,t.editingProduct=e.payload||null},closeModal(t){t.modalOpen=!1,t.editingProduct=null},openCart(t){t.cartOpen=!0},closeCart(t){t.cartOpen=!1},toggleCart(t){t.cartOpen=!t.cartOpen}}}),{openModal:o,closeModal:c,openCart:n,closeCart:i,toggleCart:d}=a.actions,l=a.reducer},4529:t=>{t.exports={productList:"shop_productList__m7fn5",productCard:"shop_productCard____dFM",productImage:"shop_productImage__lTfpz",productName:"shop_productName__LQuJS",productPrice:"shop_productPrice__9TOsY",productButton:"shop_productButton__NQU9m"}},4651:(t,e,r)=>{"use strict";r.d(e,{Cq:()=>s,Nn:()=>d,P_:()=>l,lU:()=>i,tI:()=>n});var a=r(5317),o=r(5610);let c=(t,e)=>{switch(e){case"Devices":return t.map(t=>({id:t.id||"",name:t.name||"Unnamed Category",type:t.type||"unknown",parent:t.parent||null,...t}));case"Products":return t.map(t=>({id:t.id||"",name:t.name||"Unnamed Product",price:t.price||0,description:t.description||"",categoryId:t.categoryId||"unknown",productTypeId:t.productTypeId||"unknown",imageUrls:Array.isArray(t.imageUrls)?t.imageUrls:[]}));default:return t}},n=async(t,e)=>{if(!t||!e)throw Error("Collection name and data are required.");try{return{id:(await (0,a.gS)((0,a.rJ)(o.db,t),e)).id,...e}}catch(e){throw console.error("Error adding document to ".concat(t,":"),e),e}},i=async(t,e,r)=>{if(!t||!e||!r)throw Error("Collection name, ID, and data are required.");try{let c=(0,a.H9)(o.db,t,e);return await (0,a.mZ)(c,r),{id:e,...r}}catch(e){throw console.error("Error updating document in ".concat(t,":"),e),e}},d=async(t,e)=>{if(!t||!e)throw Error("Collection name and ID are required.");try{let r=(0,a.H9)(o.db,t,e);return await (0,a.kd)(r),e}catch(e){throw console.error("Error deleting document from ".concat(t,":"),e),e}},l=async t=>{if(!t)throw Error("Collection name is required.");try{let e=(await (0,a.GG)((0,a.rJ)(o.db,t))).docs.map(t=>({id:t.id,...t.data()}));console.log('[Firestore] Raw Data from Collection "'.concat(t,'":'),e);let r=c(e,t);return console.log('[Firestore] Validated Documents for Collection "'.concat(t,'":'),r),r}catch(e){throw console.error("Error fetching documents from ".concat(t,":"),e),e}},s=async function(t,e,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(!t)throw Error("Collection name is required.");try{let i=(0,a.rJ)(o.db,t),d=Object.entries(e).map(t=>{let[e,r]=t;return(0,a._M)(e,"==",r)});d.push((0,a.My)("price","asc")),d.push((0,a.AB)(r)),n&&d.push((0,a.HM)(n));let l=(0,a.P)(i,...d),s=await (0,a.GG)(l),u=s.docs.map(t=>({id:t.id,...t.data()})),p=s.docs[s.docs.length-1],m=c(u,t);return console.log('[Firestore] Paginated Documents for Collection "'.concat(t,'":'),m),{docs:m,lastVisible:p}}catch(e){throw console.error("Error fetching paginated documents from ".concat(t,":"),e),e}}},5543:(t,e,r)=>{"use strict";r.r(e),r.d(e,{default:()=>h});var a=r(5155),o=r(2115),c=r(4651),n=r(4540),i=r(7409),d=r(2218),l=r(205),s=r(4529),u=r.n(s);function p(t){var e;let{product:r}=t,o=(0,n.wA)(),c=(0,n.d4)(t=>t.ui.cartOpen),s=(0,l.Y)((null==(e=r.imageUrls)?void 0:e[0])||null);return(0,a.jsxs)("div",{className:u().productCard,children:[s?(0,a.jsx)("img",{src:s,alt:r.name,className:u().productImage}):(0,a.jsx)("div",{className:u().productImagePlaceholder,children:"Image loading..."}),(0,a.jsx)("h2",{className:u().productName,children:r.name}),(0,a.jsxs)("p",{className:u().productPrice,children:["â‚¬",r.price]}),(0,a.jsx)("button",{onClick:()=>{o((0,i.bE)(r)),c||o((0,d.n2)())},className:u().productButton,children:"Add to Cart"})]})}function m(t){let{products:e}=t;return(0,a.jsx)("div",{className:u().productList,children:e.map(t=>(0,a.jsx)(p,{product:t},t.id))})}function h(){let[t,e]=(0,o.useState)([]),[r,n]=(0,o.useState)(!0),[i,d]=(0,o.useState)(null),[l,s]=(0,o.useState)(null),[u,p]=(0,o.useState)(!0),h=async function(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];n(!0);try{let{docs:r,lastVisible:a}=await (0,c.Cq)("Products",{},24,t?l:null);e(e=>t?[...e,...r]:r),s(a),r.length<24&&p(!1)}catch(t){d("Failed to fetch products."),console.error(t)}finally{n(!1)}};return((0,o.useEffect)(()=>{h()},[]),r&&0===t.length)?(0,a.jsx)("div",{className:"text-center",children:"Loading..."}):i?(0,a.jsx)("div",{className:"text-center text-red-500",children:i}):(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"Product List"}),(0,a.jsx)(m,{products:t}),u&&!r&&(0,a.jsx)("div",{style:{display:"flex",justifyContent:"center",marginTop:"24px",marginBottom:"32px"},children:(0,a.jsx)("button",{onClick:()=>h(!0),style:{backgroundColor:"#ff6600",color:"#fff",padding:"12px 24px",fontWeight:"bold",border:"none",borderRadius:"999px",cursor:"pointer",fontSize:"1rem"},children:"Load More"})}),r&&t.length>0&&(0,a.jsx)("p",{className:"text-center mt-4",children:"Loading more products..."})]})}},5610:(t,e,r)=>{"use strict";r.d(e,{db:()=>d,j:()=>l});var a=r(3915),o=r(5317),c=r(3004),n=r(858);let i=(0,a.Wp)({apiKey:"AIzaSyDKhEzFJi9HCHLVG_L3I4W8FtAT42dcuaU",authDomain:"mobile-6cc0b.firebaseapp.com",projectId:"mobile-6cc0b",storageBucket:"mobile-6cc0b.firebasestorage.app",messagingSenderId:"858564731564",appId:"1:858564731564:web:7116cb2c45b641501b3509"}),d=(0,o.aU)(i),l=(0,c.xI)(i);(0,n.c7)(i)},5623:(t,e,r)=>{Promise.resolve().then(r.bind(r,5543))},7409:(t,e,r)=>{"use strict";r.d(e,{Ay:()=>s,Bo:()=>o,CG:()=>d,bE:()=>c,dt:()=>n,o7:()=>i,sX:()=>l});let a=(0,r(1990).Z0)({name:"cart",initialState:{items:[],totalQuantity:0,totalPrice:0},reducers:{setCart:(t,e)=>e.payload,addToCart(t,e){let r=e.payload,a=t.items.find(t=>t.productId===r.id);if(a)a.quantity+=1;else{var o;t.items.push({productId:r.id,name:r.name,price:r.price,imageUrl:(null==(o=r.imageUrls)?void 0:o[0])||"",quantity:1})}t.totalQuantity+=1,t.totalPrice+=r.price},removeFromCart(t,e){let r=e.payload,a=t.items.find(t=>t.productId===r);a&&(t.totalQuantity-=a.quantity,t.totalPrice-=a.price*a.quantity,t.items=t.items.filter(t=>t.productId!==r))},increaseQuantity(t,e){let r=e.payload,a=t.items.find(t=>t.productId===r);a&&(a.quantity+=1,t.totalQuantity+=1,t.totalPrice+=a.price)},decreaseQuantity(t,e){let r=e.payload,o=t.items.find(t=>t.productId===r);o&&o.quantity>1?(o.quantity-=1,t.totalQuantity-=1,t.totalPrice-=o.price):a.caseReducers.removeFromCart(t,{payload:r})},clearCart(t){t.items=[],t.totalQuantity=0,t.totalPrice=0,localStorage.removeItem("cart")}}}),{setCart:o,addToCart:c,removeFromCart:n,increaseQuantity:i,decreaseQuantity:d,clearCart:l}=a.actions,s=a.reducer}},t=>{var e=e=>t(t.s=e);t.O(0,[6,992,156,835,540,990,441,684,358],()=>e(5623)),_N_E=t.O()}]);