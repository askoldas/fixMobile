(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[575],{205:(e,t,r)=>{"use strict";r.d(t,{Y:()=>a});var i=r(858),n=r(2115);function a(e){let[t,r]=(0,n.useState)(null);return(0,n.useEffect)(()=>{if(!e)return;let t=(0,i.c7)(),n=(0,i.KR)(t,e);(0,i.qk)(n).then(e=>r(e)).catch(()=>r(null))},[e]),t}},2035:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});var i=r(2115);function n(e){let{children:t}=e,[r,n]=(0,i.useState)(!1);return(0,i.useEffect)(()=>n(!0),[]),r?t:null}},4651:(e,t,r)=>{"use strict";r.d(t,{Cq:()=>c,Nn:()=>o,P_:()=>s,lU:()=>l,tI:()=>d});var i=r(5317),n=r(5610);let a=(e,t)=>{switch(t){case"Devices":return e.map(e=>({id:e.id||"",name:e.name||"Unnamed Category",type:e.type||"unknown",parent:e.parent||null,...e}));case"Products":return e.map(e=>({id:e.id||"",name:e.name||"Unnamed Product",price:e.price||0,description:e.description||"",categoryId:e.categoryId||"unknown",productTypeId:e.productTypeId||"unknown",imageUrls:Array.isArray(e.imageUrls)?e.imageUrls:[]}));default:return e}},d=async(e,t)=>{if(!e||!t)throw Error("Collection name and data are required.");try{return{id:(await (0,i.gS)((0,i.rJ)(n.db,e),t)).id,...t}}catch(t){throw console.error("Error adding document to ".concat(e,":"),t),t}},l=async(e,t,r)=>{if(!e||!t||!r)throw Error("Collection name, ID, and data are required.");try{let a=(0,i.H9)(n.db,e,t);return await (0,i.mZ)(a,r),{id:t,...r}}catch(t){throw console.error("Error updating document in ".concat(e,":"),t),t}},o=async(e,t)=>{if(!e||!t)throw Error("Collection name and ID are required.");try{let r=(0,i.H9)(n.db,e,t);return await (0,i.kd)(r),t}catch(t){throw console.error("Error deleting document from ".concat(e,":"),t),t}},s=async e=>{if(!e)throw Error("Collection name is required.");try{let t=(await (0,i.GG)((0,i.rJ)(n.db,e))).docs.map(e=>({id:e.id,...e.data()}));console.log('[Firestore] Raw Data from Collection "'.concat(e,'":'),t);let r=a(t,e);return console.log('[Firestore] Validated Documents for Collection "'.concat(e,'":'),r),r}catch(t){throw console.error("Error fetching documents from ".concat(e,":"),t),t}},c=async function(e,t,r){let d=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(!e)throw Error("Collection name is required.");try{let l=(0,i.rJ)(n.db,e),o=Object.entries(t).map(e=>{let[t,r]=e;return(0,i._M)(t,"==",r)});o.push((0,i.My)("price","asc")),o.push((0,i.AB)(r)),d&&o.push((0,i.HM)(d));let s=(0,i.P)(l,...o),c=await (0,i.GG)(s),p=c.docs.map(e=>({id:e.id,...e.data()})),u=c.docs[c.docs.length-1],m=a(p,e);return console.log('[Firestore] Paginated Documents for Collection "'.concat(e,'":'),m),{docs:m,lastVisible:u}}catch(t){throw console.error("Error fetching paginated documents from ".concat(e,":"),t),t}}},4742:e=>{e.exports={"manager-container":"products-manager_manager-container__hNwer","top-section":"products-manager_top-section__tYg5y",filters:"products-manager_filters__gcJDQ","filter-dropdown":"products-manager_filter-dropdown__nRat5","add-button":"products-manager_add-button__Ogx46","product-list":"products-manager_product-list__8X5VW","product-item":"products-manager_product-item__YK3jo","product-actions":"products-manager_product-actions__35cdf","edit-button":"products-manager_edit-button__NpNc_","delete-button":"products-manager_delete-button__P9ZR7","error-message":"products-manager_error-message__1mf_o"}},5551:(e,t,r)=>{"use strict";r.d(t,{Ay:()=>c,Bj:()=>l,DD:()=>s,j0:()=>d,vc:()=>o});var i=r(1990),n=r(5317),a=r(5610);let d=(0,i.zD)("products/fetchProducts",async()=>{let e=(await (0,n.GG)((0,n.rJ)(a.db,"Products"))).docs.map(e=>({id:e.id,...e.data()}));return console.log("✅ Products fetched from Firestore:",e),e}),l=(0,i.zD)("products/addProduct",async e=>({id:(await (0,n.gS)((0,n.rJ)(a.db,"Products"),e)).id,...e})),o=(0,i.zD)("products/updateProduct",async e=>{let{id:t,...r}=e,i=(0,n.H9)(a.db,"Products",t);return await (0,n.mZ)(i,r),e}),s=(0,i.zD)("products/deleteProduct",async e=>{let t=(0,n.H9)(a.db,"Products",e);return await (0,n.kd)(t),e}),c=(0,i.Z0)({name:"products",initialState:{items:[],loading:!1,error:null},reducers:{},extraReducers:e=>{e.addCase(d.pending,e=>{e.loading=!0,e.error=null}).addCase(d.fulfilled,(e,t)=>{e.loading=!1,e.items=t.payload}).addCase(d.rejected,(e,t)=>{e.loading=!1,e.error=t.error.message}).addCase(l.fulfilled,(e,t)=>{e.items.push(t.payload)}).addCase(o.fulfilled,(e,t)=>{let r=e.items.findIndex(e=>e.id===t.payload.id);-1!==r&&(e.items[r]=t.payload)}).addCase(s.fulfilled,(e,t)=>{e.items=e.items.filter(e=>e.id!==t.payload)})}}).reducer},5610:(e,t,r)=>{"use strict";r.d(t,{db:()=>o,j:()=>s});var i=r(3915),n=r(5317),a=r(3004),d=r(858);let l=(0,i.Wp)({apiKey:"AIzaSyDKhEzFJi9HCHLVG_L3I4W8FtAT42dcuaU",authDomain:"mobile-6cc0b.firebaseapp.com",projectId:"mobile-6cc0b",storageBucket:"mobile-6cc0b.firebasestorage.app",messagingSenderId:"858564731564",appId:"1:858564731564:web:7116cb2c45b641501b3509"}),o=(0,n.aU)(l),s=(0,a.xI)(l);(0,d.c7)(l)},6943:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>f});var i=r(5155),n=r(2115),a=r(4540),d=r(9183),l=r(5551),o=r(9175),s=r(4651);function c(e){let{isOpen:t,onClose:r,onSubmit:a,initialData:d=null,categories:l=[],productTypes:o=[]}=e,[s,c]=(0,n.useState)({name:"",price:"",description:"",models:[],productType:"",brand:"",series:""});return((0,n.useEffect)(()=>{d&&c({name:d.name||"",price:d.price||"",description:d.description||"",models:d.modelIds||[],productType:d.productTypeId||"",brand:"",series:""})},[d]),t)?(0,i.jsx)("div",{style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3},children:(0,i.jsxs)("div",{style:{backgroundColor:"white",padding:"20px",borderRadius:"5px",width:"80%",maxWidth:"500px"},children:[(0,i.jsx)("h3",{children:d?"Edit Product":"Add Product"}),(0,i.jsx)("input",{type:"text",placeholder:"Product Name",value:s.name,onChange:e=>c({...s,name:e.target.value}),style:{marginBottom:"10px",padding:"10px",width:"100%"}}),(0,i.jsx)("input",{type:"text",placeholder:"Price",value:s.price,onChange:e=>c({...s,price:e.target.value}),style:{marginBottom:"10px",padding:"10px",width:"100%"}}),(0,i.jsx)("textarea",{placeholder:"Description",value:s.description,onChange:e=>c({...s,description:e.target.value}),style:{marginBottom:"10px",padding:"10px",width:"100%",height:"80px"}}),(0,i.jsxs)("select",{value:s.productType,onChange:e=>c({...s,productType:e.target.value}),style:{marginBottom:"10px",padding:"10px",width:"100%"},children:[(0,i.jsx)("option",{value:"",children:"Select Product Type"}),o.map(e=>(0,i.jsx)("option",{value:e.id,children:e.name},e.id))]}),(0,i.jsxs)("select",{value:s.brand,onChange:e=>c({...s,brand:e.target.value,series:"",models:[]}),style:{marginBottom:"10px",padding:"10px",width:"100%"},children:[(0,i.jsx)("option",{value:"",children:"Select Brand"}),l.filter(e=>"brand"===e.type).map(e=>(0,i.jsx)("option",{value:e.id,children:e.name},e.id))]}),s.brand&&(0,i.jsxs)("select",{value:s.series,onChange:e=>c({...s,series:e.target.value,models:[]}),style:{marginBottom:"10px",padding:"10px",width:"100%"},children:[(0,i.jsx)("option",{value:"",children:"Select Series"}),l.filter(e=>"series"===e.type&&e.parent===s.brand).map(e=>(0,i.jsx)("option",{value:e.id,children:e.name},e.id))]}),s.series&&(0,i.jsxs)("div",{style:{marginBottom:"10px"},children:[(0,i.jsxs)("select",{onChange:e=>{let t=e.target.value;t&&!s.models.includes(t)&&c(e=>({...e,models:[...e.models,t]}))},style:{marginBottom:"10px",padding:"10px",width:"100%"},children:[(0,i.jsx)("option",{value:"",children:"Select Model"}),l.filter(e=>"model"===e.type&&e.parent===s.series).map(e=>(0,i.jsx)("option",{value:e.id,children:e.name},e.id))]}),(0,i.jsx)("ul",{children:s.models.map(e=>{var t;return(0,i.jsxs)("li",{children:[null==(t=l.find(t=>t.id===e))?void 0:t.name," ",(0,i.jsx)("button",{onClick:()=>c(t=>({...t,models:t.models.filter(t=>t!==e)})),children:"\xd7"})]},e)})})]}),(0,i.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[(0,i.jsx)("button",{onClick:()=>{if(!s.name||!s.price||0===s.models.length||!s.productType)return void alert("All fields are required.");a({name:s.name,price:parseFloat(s.price),description:s.description,modelIds:s.models,productTypeId:s.productType}),c({name:"",price:"",description:"",models:[],productType:"",brand:"",series:""}),r()},style:{padding:"10px",backgroundColor:"#007bff",color:"white",border:"none",borderRadius:"5px"},children:"Submit"}),(0,i.jsx)("button",{onClick:r,style:{padding:"10px",backgroundColor:"#dc3545",color:"white",border:"none",borderRadius:"5px"},children:"Cancel"})]})]})}):null}var p=r(4742),u=r.n(p),m=r(205);function g(e){var t;let{product:r,onEdit:a,onInlineEdit:d,onDelete:l,isExpanded:o,onToggleExpand:s,categories:c,productTypes:p}=e,[g,h]=(0,n.useState)({name:r.name||"",price:r.price||"",quantity:r.quantity||0,description:r.description||"",models:r.modelIds||[],productType:r.productTypeId||"",brand:"",series:""}),[x,y]=(0,n.useState)(0),f=(0,m.Y)((null==(t=r.imageUrls)?void 0:t[x])||null);(0,n.useEffect)(()=>{if(c&&c.length>0){let e=c.find(e=>e.id===g.models[0]);if(e){let t=c.find(t=>t.id===e.parent),r=t?c.find(e=>e.id===t.parent):null;h(e=>({...e,brand:(null==r?void 0:r.id)||"",series:(null==t?void 0:t.id)||""}))}}},[c]);let b=(null==c?void 0:c.filter(e=>"brand"===e.type))||[],v=(null==c?void 0:c.filter(e=>"series"===e.type&&e.parent===g.brand))||[],j=(null==c?void 0:c.filter(e=>"model"===e.type&&e.parent===g.series))||[];return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("li",{className:u()["product-item"],onClick:s,style:{cursor:"pointer",padding:"10px",backgroundColor:"#f9f9f9",borderRadius:"5px",marginBottom:"5px",display:"grid",gridTemplateColumns:"1fr 160px 160px",alignItems:"center"},children:[(0,i.jsx)("span",{style:{textAlign:"left"},children:r.name}),(0,i.jsxs)("span",{style:{textAlign:"right"},children:["number"==typeof r.price?r.price.toFixed(2):"0.00"," €"]}),(0,i.jsx)("span",{style:{textAlign:"right"},children:"number"==typeof r.quantity?r.quantity:0})]}),o&&(0,i.jsxs)("div",{style:{marginBottom:"15px",padding:"15px",border:"1px solid #ddd",borderRadius:"5px",backgroundColor:"#fff",display:"grid",gridTemplateColumns:"1fr 2fr 2fr",gap:"20px"},children:[(0,i.jsx)("div",{style:{textAlign:"center",position:"relative"},children:f?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("img",{src:f,alt:r.name,style:{width:"100%",marginBottom:"10px"}}),(0,i.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[(0,i.jsx)("button",{type:"button",onClick:e=>{e.stopPropagation(),y(e=>Math.max(e-1,0))},disabled:0===x,children:"←"}),(0,i.jsx)("button",{type:"button",onClick:e=>{e.stopPropagation(),y(e=>Math.min(e+1,r.imageUrls.length-1))},disabled:x===r.imageUrls.length-1,children:"→"})]})]}):(0,i.jsx)("div",{style:{width:"100%",height:"150px",border:"1px dashed #ccc",display:"flex",justifyContent:"center",alignItems:"center",fontSize:"24px",color:"#ccc",marginBottom:"10px"},children:"Loading image..."})}),(0,i.jsxs)("div",{children:[(0,i.jsx)("input",{type:"text",value:g.name,onChange:e=>h({...g,name:e.target.value}),placeholder:"Product Name",style:{display:"block",marginBottom:"10px",width:"100%"}}),(0,i.jsx)("input",{type:"text",value:g.price,onChange:e=>h({...g,price:e.target.value}),placeholder:"Price",style:{display:"block",marginBottom:"10px",width:"100%"}}),(0,i.jsx)("input",{type:"number",value:g.quantity,onChange:e=>h({...g,quantity:e.target.value}),placeholder:"Quantity",style:{display:"block",marginBottom:"10px",width:"100%"}}),(0,i.jsx)("textarea",{value:g.description,onChange:e=>h({...g,description:e.target.value}),placeholder:"Description",style:{display:"block",marginBottom:"10px",width:"100%",height:"80px"}})]}),(0,i.jsxs)("div",{children:[(0,i.jsxs)("select",{value:g.productType,onChange:e=>h({...g,productType:e.target.value}),style:{display:"block",marginBottom:"10px",width:"100%"},children:[(0,i.jsx)("option",{value:"",children:"Select Product Type"}),null==p?void 0:p.map(e=>(0,i.jsx)("option",{value:e.id,children:e.name},e.id))]}),(0,i.jsxs)("select",{value:g.brand,onChange:e=>h({...g,brand:e.target.value,series:"",models:[]}),style:{display:"block",marginBottom:"10px",width:"100%"},children:[(0,i.jsx)("option",{value:"",children:"Select Brand"}),b.map(e=>(0,i.jsx)("option",{value:e.id,children:e.name},e.id))]}),g.brand&&(0,i.jsxs)("select",{value:g.series,onChange:e=>h({...g,series:e.target.value,models:[]}),style:{display:"block",marginBottom:"10px",width:"100%"},children:[(0,i.jsx)("option",{value:"",children:"Select Series"}),v.map(e=>(0,i.jsx)("option",{value:e.id,children:e.name},e.id))]}),g.series&&(0,i.jsxs)("div",{children:[(0,i.jsxs)("select",{onChange:e=>{let t=e.target.value;t&&!g.models.includes(t)&&h(e=>({...e,models:[...e.models,t]}))},style:{display:"block",marginBottom:"10px",width:"100%"},children:[(0,i.jsx)("option",{value:"",children:"Select Model"}),j.map(e=>(0,i.jsx)("option",{value:e.id,children:e.name},e.id))]}),(0,i.jsx)("ul",{style:{listStyle:"none",padding:0},children:g.models.map(e=>{let t=c.find(t=>t.id===e);return t?(0,i.jsxs)("li",{style:{marginBottom:"5px"},children:[t.name,(0,i.jsx)("button",{onClick:()=>h(t=>({...t,models:t.models.filter(t=>t!==e)})),style:{marginLeft:"10px"},children:"\xd7"})]},e):null})})]})]}),(0,i.jsxs)("div",{style:{gridColumn:"1 / -1",display:"flex",justifyContent:"flex-end",marginTop:"20px"},children:[(0,i.jsx)("button",{onClick:()=>{d({...r,name:g.name,price:parseFloat(g.price),quantity:parseInt(g.quantity),description:g.description,productTypeId:g.productType,modelIds:g.models}),s()},style:{padding:"8px 12px",backgroundColor:"#28a745",color:"#fff",border:"none",borderRadius:"4px",marginRight:"10px"},children:"Save Changes"}),(0,i.jsx)("button",{onClick:s,style:{padding:"8px 12px",backgroundColor:"#ffc107",color:"#fff",border:"none",borderRadius:"4px",marginRight:"10px"},children:"Cancel"}),(0,i.jsx)("button",{onClick:()=>l(r.id),style:{padding:"8px 12px",backgroundColor:"#dc3545",color:"#fff",border:"none",borderRadius:"4px"},children:"Delete"})]})]})]})}function h(e){let{products:t,onEdit:r,onInlineEdit:a,onDelete:d,categories:l,productTypes:o}=e,[s,c]=(0,n.useState)(null),p=e=>{c(t=>t===e?null:e)};return(0,i.jsx)("ul",{className:u()["product-list"],children:t.map(e=>(0,i.jsx)(g,{product:e,onEdit:r,onInlineEdit:a,onDelete:d,isExpanded:s===e.id,onToggleExpand:()=>p(e.id),categories:l,productTypes:o},e.id))})}function x(){let e=(0,a.wA)(),t=(0,a.d4)(e=>e.products.items),r=(0,a.d4)(e=>e.categories.items),p=(0,a.d4)(e=>e.products.error||e.categories.error),[m,g]=(0,n.useState)([]),[x,y]=(0,n.useState)([]),[f,b]=(0,n.useState)(null),[v,j]=(0,n.useState)(null),[C,w]=(0,n.useState)(null),[_,k]=(0,n.useState)(null),[S,I]=(0,n.useState)(!1),[P,T]=(0,n.useState)(null),[A,B]=(0,n.useState)(1),E=(0,n.useCallback)(async()=>{try{let e=await (0,s.P_)("ProductTypes");g(e)}catch(e){console.error("Error fetching product types:",e)}},[]);(0,n.useEffect)(()=>{e((0,l.j0)()),e((0,o.j)()),E()},[e,E]),(0,n.useEffect)(()=>{let e=[...t];if(f&&(e=e.filter(e=>e.productTypeId===f.value)),_)e=e.filter(e=>Array.isArray(e.modelIds)&&e.modelIds.includes(_.value));else if(C){let t=r.filter(e=>"model"===e.type&&e.parent===C.value).map(e=>e.id);e=e.filter(e=>Array.isArray(e.modelIds)&&e.modelIds.some(e=>t.includes(e)))}else if(v){let t=r.filter(e=>"series"===e.type&&e.parent===v.value).map(e=>e.id),i=r.filter(e=>"model"===e.type&&t.includes(e.parent)).map(e=>e.id);e=e.filter(e=>Array.isArray(e.modelIds)&&e.modelIds.some(e=>i.includes(e)))}y(e),B(1)},[t,f,v,C,_,r]);let D=r.filter(e=>"brand"===e.type).map(e=>({value:e.id,label:e.name})),N=r.filter(e=>"series"===e.type&&(!v||e.parent===v.value)).map(e=>({value:e.id,label:e.name})),q=r.filter(e=>"model"===e.type&&(C?e.parent===C.value:!v||r.filter(e=>"series"===e.type&&e.parent===v.value).map(e=>e.id).includes(e.parent))).map(e=>({value:e.id,label:e.name})),R=m.map(e=>({value:e.id,label:e.name})),M=25*A,F=x.slice(M-25,M);return(0,i.jsxs)("div",{className:u()["manager-container"],children:[(0,i.jsx)("h2",{children:"Products"}),p&&(0,i.jsx)("p",{className:u()["error-message"],children:p}),(0,i.jsxs)("div",{className:u()["top-section"],children:[(0,i.jsxs)("div",{className:u().filters,children:[(0,i.jsx)(d.Ay,{options:R,value:f,onChange:e=>b(e),placeholder:"Select Product Type",isClearable:!0}),(0,i.jsx)(d.Ay,{options:D,value:v,onChange:e=>{j(e),w(null),k(null)},placeholder:"Select Brand",isClearable:!0}),(0,i.jsx)(d.Ay,{options:N,value:C,onChange:e=>{w(e),k(null)},placeholder:"Select Series",isClearable:!0}),(0,i.jsx)(d.Ay,{options:q,value:_,onChange:e=>k(e),placeholder:"Select Model",isClearable:!0})]}),(0,i.jsx)("button",{className:u()["add-button"],onClick:()=>I(!0),children:"Add New Product"})]}),(0,i.jsx)(h,{products:F,onEdit:e=>{T(e),I(!0)},onInlineEdit:t=>{e((0,l.vc)(t))},onDelete:t=>{window.confirm("Are you sure you want to delete this product?")&&e((0,l.DD)(t))},categories:r,productTypes:m}),(0,i.jsxs)("div",{style:{display:"flex",justifyContent:"center",marginTop:"20px"},children:[(0,i.jsx)("button",{onClick:()=>B(e=>Math.max(e-1,1)),disabled:1===A,children:"Previous"}),(0,i.jsxs)("span",{style:{margin:"0 10px"},children:[A," of ",Math.ceil(x.length/25)]}),(0,i.jsx)("button",{onClick:()=>B(e=>Math.min(e+1,Math.ceil(x.length/25))),disabled:A===Math.ceil(x.length/25),children:"Next"})]}),S&&(0,i.jsx)(c,{isOpen:S,onClose:()=>I(!1),onSubmit:t=>{P?e((0,l.vc)({...P,...t})):e((0,l.Bj)(t)),I(!1)},initialData:P,categories:r,productTypes:m})]})}var y=r(2035);function f(){return(0,i.jsx)(y.A,{children:(0,i.jsx)(x,{})})}},8790:(e,t,r)=>{Promise.resolve().then(r.bind(r,6943))},9175:(e,t,r)=>{"use strict";r.d(t,{A:()=>l,j:()=>d});var i=r(1990),n=r(5317),a=r(5610);let d=(0,i.zD)("categories/fetchCategories",async()=>(await (0,n.GG)((0,n.rJ)(a.db,"Devices"))).docs.map(e=>({id:e.id,...e.data()}))),l=(0,i.Z0)({name:"categories",initialState:{items:[],loading:!1,error:null},reducers:{},extraReducers:e=>{e.addCase(d.pending,e=>{e.loading=!0,e.error=null}).addCase(d.fulfilled,(e,t)=>{e.loading=!1,e.items=t.payload}).addCase(d.rejected,(e,t)=>{e.loading=!1,e.error=t.error.message})}}).reducer}},e=>{var t=t=>e(e.s=t);e.O(0,[905,992,156,835,540,990,183,441,684,358],()=>t(8790)),_N_E=e.O()}]);