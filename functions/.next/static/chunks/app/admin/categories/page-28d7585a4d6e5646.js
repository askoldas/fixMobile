(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[631],{2035:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});var a=r(2115);function n(e){let{children:t}=e,[r,n]=(0,a.useState)(!1);return(0,a.useEffect)(()=>n(!0),[]),r?t:null}},2721:e=>{e.exports={"manager-container":"product-types-manager_manager-container__19W3x","add-button":"product-types-manager_add-button__xZKF1","types-list":"product-types-manager_types-list__XbJSF","type-item":"product-types-manager_type-item__aLE37","type-details":"product-types-manager_type-details__Ina1x","type-actions":"product-types-manager_type-actions__RebMC","edit-button":"product-types-manager_edit-button__Ai41D","delete-button":"product-types-manager_delete-button__Y8k2o","nested-types":"product-types-manager_nested-types__Scuwa","add-child-container":"product-types-manager_add-child-container__SCZRN","add-child-button":"product-types-manager_add-child-button__nQ2f7","error-message":"product-types-manager_error-message__7I8fq"}},4651:(e,t,r)=>{"use strict";r.d(t,{Cq:()=>l,Nn:()=>d,P_:()=>s,lU:()=>i,tI:()=>o});var a=r(5317),n=r(5610);let c=(e,t)=>{switch(t){case"Devices":return e.map(e=>({id:e.id||"",name:e.name||"Unnamed Category",type:e.type||"unknown",parent:e.parent||null,...e}));case"Products":return e.map(e=>({id:e.id||"",name:e.name||"Unnamed Product",price:e.price||0,description:e.description||"",categoryId:e.categoryId||"unknown",productTypeId:e.productTypeId||"unknown",imageUrls:Array.isArray(e.imageUrls)?e.imageUrls:[]}));default:return e}},o=async(e,t)=>{if(!e||!t)throw Error("Collection name and data are required.");try{return{id:(await (0,a.gS)((0,a.rJ)(n.db,e),t)).id,...t}}catch(t){throw console.error("Error adding document to ".concat(e,":"),t),t}},i=async(e,t,r)=>{if(!e||!t||!r)throw Error("Collection name, ID, and data are required.");try{let c=(0,a.H9)(n.db,e,t);return await (0,a.mZ)(c,r),{id:t,...r}}catch(t){throw console.error("Error updating document in ".concat(e,":"),t),t}},d=async(e,t)=>{if(!e||!t)throw Error("Collection name and ID are required.");try{let r=(0,a.H9)(n.db,e,t);return await (0,a.kd)(r),t}catch(t){throw console.error("Error deleting document from ".concat(e,":"),t),t}},s=async e=>{if(!e)throw Error("Collection name is required.");try{let t=(await (0,a.GG)((0,a.rJ)(n.db,e))).docs.map(e=>({id:e.id,...e.data()}));console.log('[Firestore] Raw Data from Collection "'.concat(e,'":'),t);let r=c(t,e);return console.log('[Firestore] Validated Documents for Collection "'.concat(e,'":'),r),r}catch(t){throw console.error("Error fetching documents from ".concat(e,":"),t),t}},l=async function(e,t,r){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(!e)throw Error("Collection name is required.");try{let i=(0,a.rJ)(n.db,e),d=Object.entries(t).map(e=>{let[t,r]=e;return(0,a._M)(t,"==",r)});d.push((0,a.My)("price","asc")),d.push((0,a.AB)(r)),o&&d.push((0,a.HM)(o));let s=(0,a.P)(i,...d),l=await (0,a.GG)(s),u=l.docs.map(e=>({id:e.id,...e.data()})),p=l.docs[l.docs.length-1],m=c(u,e);return console.log('[Firestore] Paginated Documents for Collection "'.concat(e,'":'),m),{docs:m,lastVisible:p}}catch(t){throw console.error("Error fetching paginated documents from ".concat(e,":"),t),t}}},5610:(e,t,r)=>{"use strict";r.d(t,{db:()=>d,j:()=>s});var a=r(3915),n=r(5317),c=r(3004),o=r(858);let i=(0,a.Wp)({apiKey:"AIzaSyDKhEzFJi9HCHLVG_L3I4W8FtAT42dcuaU",authDomain:"mobile-6cc0b.firebaseapp.com",projectId:"mobile-6cc0b",storageBucket:"mobile-6cc0b.firebasestorage.app",messagingSenderId:"858564731564",appId:"1:858564731564:web:7116cb2c45b641501b3509"}),d=(0,n.aU)(i),s=(0,c.xI)(i);(0,o.c7)(i)},7406:(e,t,r)=>{Promise.resolve().then(r.bind(r,8015))},8015:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>y});var a=r(5155),n=r(2115),c=r(4651);let o=()=>{let[e,t]=(0,n.useState)([]),[r,a]=(0,n.useState)(!1),[o,i]=(0,n.useState)(null);return(0,n.useEffect)(()=>{(async()=>{a(!0);try{let e=await (0,c.P_)("Devices");t(e),i(null)}catch(e){console.error("Error fetching devices:",e),i("Failed to fetch devices.")}finally{a(!1)}})()},[]),{devices:e,loading:r,error:o,addDevice:async e=>{var r;if(!(null==(r=e.name)?void 0:r.trim())||!e.type)throw Error("Name and type are required.");try{let r=await (0,c.tI)("Devices",e);t(e=>[...e,r])}catch(e){throw console.error("Error adding device:",e),e}},updateDevice:async(e,r)=>{try{await (0,c.lU)("Devices",e,r),t(t=>t.map(t=>t.id===e?{...t,...r}:t))}catch(e){throw console.error("Error updating device:",e),e}},deleteDevice:async e=>{try{await (0,c.Nn)("Devices",e),t(t=>t.filter(t=>t.id!==e))}catch(e){throw console.error("Error deleting device:",e),e}}}};var i=r(9058),d=r.n(i);function s(){let{devices:e,loading:t,error:r,addDevice:c,updateDevice:i,deleteDevice:s}=o(),[l,u]=(0,n.useState)({}),p=async function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";try{await c({name:e,type:t,parent:r}),alert("Category added successfully!")}catch(e){alert("Failed to add category. "+e.message)}},m=async(e,t)=>{try{await i(e,t),alert("Category updated successfully!")}catch(e){alert("Failed to update category. "+e.message)}},y=async e=>{try{await s(e),alert("Category deleted successfully!")}catch(e){alert("Failed to delete category. "+e.message)}},g=e=>{u(t=>({...t,[e]:!t[e]}))},h=e=>(0,a.jsx)("ul",{className:d()["categories-list"],children:e.map(e=>(0,a.jsxs)("li",{className:d()["category-item"],children:[(0,a.jsxs)("div",{className:d()["category-details"],onClick:()=>g(e.id),children:[(0,a.jsxs)("span",{children:[e.name," (",e.type,")"]}),(0,a.jsxs)("span",{className:d()["category-actions"],children:[(0,a.jsx)("button",{className:d()["edit-button"],onClick:t=>{t.stopPropagation();let r=prompt("Enter new name",e.name);r&&m(e.id,{name:r})},children:"Edit"}),(0,a.jsx)("button",{className:d()["delete-button"],onClick:t=>{t.stopPropagation(),window.confirm("Are you sure you want to delete this entry?")&&y(e.id)},children:"Delete"})]})]}),l[e.id]&&e.children.length>0&&(0,a.jsx)("div",{className:d()["nested-categories"],children:h(e.children)}),l[e.id]&&"brand"===e.type&&(0,a.jsx)("div",{className:d()["add-child-container"],children:(0,a.jsx)("button",{className:d()["add-child-button"],onClick:t=>{t.stopPropagation();let r=prompt("Enter new series name");r&&p(r,"series",e.id)},children:"Add Series"})}),l[e.id]&&"series"===e.type&&(0,a.jsx)("div",{className:d()["add-child-container"],children:(0,a.jsx)("button",{className:d()["add-child-button"],onClick:t=>{t.stopPropagation();let r=prompt("Enter new model name");r&&p(r,"model",e.id)},children:"Add Model"})})]},e.id))});return(0,a.jsxs)("div",{className:d()["manager-container"],children:[(0,a.jsx)("button",{className:d()["add-button"],onClick:()=>{let e=prompt("Enter new brand name");e&&p(e,"brand")},children:"Add New Brand"}),t?(0,a.jsx)("p",{className:d().loading,children:"Loading..."}):h((()=>{let t={};e.forEach(e=>{t[e.id]={...e,children:[]}});let r=[];return e.forEach(e=>{if(e.parent){var a;null==(a=t[e.parent])||a.children.push(t[e.id])}else r.push(t[e.id])}),r})()),r&&(0,a.jsx)("p",{className:d()["error-message"],children:r})]})}var l=r(2721),u=r.n(l);function p(){let[e,t]=(0,n.useState)([]),[r,o]=(0,n.useState)({});(0,n.useEffect)(()=>{(async()=>{try{let e=await (0,c.P_)("ProductTypes");t(e)}catch(e){console.error("Error fetching product types:",e),alert("Failed to fetch product types.")}})()},[]);let i=async function(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!e.trim())return void alert("Product type name is required.");try{let a=await (0,c.tI)("ProductTypes",{name:e,parent:r});t(e=>[...e,a]),alert("Product type added successfully!")}catch(e){console.error("Error adding product type:",e),alert("Failed to add product type.")}},d=async(e,r)=>{if(!r.name.trim())return void alert("Product type name is required.");try{await (0,c.lU)("ProductTypes",e,r),t(t=>t.map(t=>t.id===e?{...t,...r}:t)),alert("Product type updated successfully!")}catch(e){console.error("Error updating product type:",e),alert("Failed to update product type.")}},s=async r=>{if(window.confirm("Are you sure you want to delete this product type and its subcategories?"))try{let a=async t=>{for(let r of e.filter(e=>e.parent===t))await (0,c.Nn)("ProductTypes",r.id);await (0,c.Nn)("ProductTypes",t)};await a(r),t(e=>e.filter(e=>e.id!==r&&e.parent!==r)),alert("Product type deleted successfully!")}catch(e){console.error("Error deleting product type:",e),alert("Failed to delete product type.")}},l=e=>{o(t=>({...t,[e]:!t[e]}))},p=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return r>1?[]:e.filter(e=>e.parent===t).map(e=>({...e,children:p(e.id,r+1)}))},m=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return(0,a.jsx)("ul",{className:u()["types-list"],children:e.map(e=>(0,a.jsxs)("li",{className:u()["type-item"],children:[(0,a.jsxs)("div",{className:u()["type-details"],onClick:()=>l(e.id),children:[(0,a.jsx)("span",{children:e.name}),(0,a.jsxs)("span",{className:u()["type-actions"],children:[(0,a.jsx)("button",{onClick:t=>{t.stopPropagation();let r=prompt("Enter new name",e.name);r&&d(e.id,{name:r})},className:u()["edit-button"],children:"Edit"}),(0,a.jsx)("button",{onClick:t=>{t.stopPropagation(),s(e.id)},className:u()["delete-button"],children:"Delete"})]})]}),r[e.id]&&e.children.length>0&&(0,a.jsx)("div",{className:u()["nested-types"],children:m(e.children,t+1)}),r[e.id]&&t<1&&(0,a.jsx)("div",{className:u()["add-child-container"],children:(0,a.jsx)("button",{onClick:t=>{t.stopPropagation();let r=prompt("Enter subcategory name");r&&i(r,e.id)},className:u()["add-child-button"],children:"Add Subcategory"})})]},e.id))})};return(0,a.jsxs)("div",{className:u()["manager-container"],children:[(0,a.jsx)("button",{onClick:()=>{let e=prompt("Enter new product type name");e&&i(e)},className:u()["add-button"],children:"Add New Product Type"}),m(p())]})}var m=r(2035);function y(){return(0,a.jsxs)("div",{style:{padding:"20px",fontFamily:"Arial, sans-serif"},children:[(0,a.jsxs)("section",{style:{marginBottom:"40px"},children:[(0,a.jsx)("h2",{style:{marginBottom:"10px"},children:"Devices"}),(0,a.jsx)(m.A,{children:(0,a.jsx)(s,{})})]}),(0,a.jsxs)("section",{children:[(0,a.jsx)("h2",{style:{marginBottom:"10px"},children:"Product Types"}),(0,a.jsx)(m.A,{children:(0,a.jsx)(p,{})})]})]})}},9058:e=>{e.exports={"manager-container":"categories-manager_manager-container__8OkHU","add-button":"categories-manager_add-button__0WGbS","categories-list":"categories-manager_categories-list__FGJ19","category-item":"categories-manager_category-item__cmkcc","category-details":"categories-manager_category-details__2QW3z","category-actions":"categories-manager_category-actions__i6L_Q","edit-button":"categories-manager_edit-button__UcLyL","delete-button":"categories-manager_delete-button__ySi3g","nested-categories":"categories-manager_nested-categories__avOi6","add-child-container":"categories-manager_add-child-container__BOSzd","add-child-button":"categories-manager_add-child-button__0KOe_","error-message":"categories-manager_error-message__maMw2"}}},e=>{var t=t=>e(e.s=t);e.O(0,[214,992,156,835,441,684,358],()=>t(7406)),_N_E=e.O()}]);