exports.id=975,exports.ids=[975],exports.modules={762:(e,t,r)=>{"use strict";r.d(t,{db:()=>l,j:()=>d});var a=r(67989),s=r(75535),n=r(1429),o=r(70146);let i=(0,a.Wp)({apiKey:"AIzaSyDKhEzFJi9HCHLVG_L3I4W8FtAT42dcuaU",authDomain:"mobile-6cc0b.firebaseapp.com",projectId:"mobile-6cc0b",storageBucket:"mobile-6cc0b.firebasestorage.app",messagingSenderId:"858564731564",appId:"1:858564731564:web:7116cb2c45b641501b3509"}),l=(0,s.aU)(i),d=(0,n.xI)(i);(0,o.c7)(i)},883:(e,t,r)=>{"use strict";r.d(t,{Ay:()=>c,Bj:()=>i,DD:()=>d,j0:()=>o,vc:()=>l});var a=r(9317),s=r(75535),n=r(762);let o=(0,a.zD)("products/fetchProducts",async()=>{let e=(await (0,s.GG)((0,s.rJ)(n.db,"Products"))).docs.map(e=>({id:e.id,...e.data()}));return console.log("✅ Products fetched from Firestore:",e),e}),i=(0,a.zD)("products/addProduct",async e=>({id:(await (0,s.gS)((0,s.rJ)(n.db,"Products"),e)).id,...e})),l=(0,a.zD)("products/updateProduct",async e=>{let{id:t,...r}=e,a=(0,s.H9)(n.db,"Products",t);return await (0,s.mZ)(a,r),e}),d=(0,a.zD)("products/deleteProduct",async e=>{let t=(0,s.H9)(n.db,"Products",e);return await (0,s.kd)(t),e}),c=(0,a.Z0)({name:"products",initialState:{items:[],loading:!1,error:null},reducers:{},extraReducers:e=>{e.addCase(o.pending,e=>{e.loading=!0,e.error=null}).addCase(o.fulfilled,(e,t)=>{e.loading=!1,e.items=t.payload}).addCase(o.rejected,(e,t)=>{e.loading=!1,e.error=t.error.message}).addCase(i.fulfilled,(e,t)=>{e.items.push(t.payload)}).addCase(l.fulfilled,(e,t)=>{let r=e.items.findIndex(e=>e.id===t.payload.id);-1!==r&&(e.items[r]=t.payload)}).addCase(d.fulfilled,(e,t)=>{e.items=e.items.filter(e=>e.id!==t.payload)})}}).reducer},2459:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,16444,23)),Promise.resolve().then(r.t.bind(r,16042,23)),Promise.resolve().then(r.t.bind(r,88170,23)),Promise.resolve().then(r.t.bind(r,49477,23)),Promise.resolve().then(r.t.bind(r,29345,23)),Promise.resolve().then(r.t.bind(r,12089,23)),Promise.resolve().then(r.t.bind(r,46577,23)),Promise.resolve().then(r.t.bind(r,31307,23))},4016:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>E});var a=r(60687),s=r(43210);r(78158);var n=r(54676),o=r.n(n),i=r(54864),l=r(9317),d=r(883),c=r(96687),u=r(42357),m=r(32593),p=r(27921);let h=(0,l.U1)({reducer:{products:d.Ay,categories:c.A,ui:u.Ay,auth:m.Ay,cart:p.Ay}});function x({children:e}){return(0,a.jsx)(i.Kq,{store:h,children:e})}var b=r(85814),g=r.n(b),y=r(16189),v=r(30474),j=r(31847),_=r(23877),f=r(762),C=r(1429),P=r(75535);let A=()=>{let e=(0,i.wA)(),t=async e=>{try{let t=await (0,P.x7)((0,P.H9)(f.db,"users",e));if(t.exists())return t.data();return null}catch(e){return console.error("Error fetching user profile:",e),null}};return(0,s.useEffect)(()=>{let r=(0,C.hg)(f.j,async r=>{if(r){let a=await t(r.uid);a?e((0,m.gV)({uid:r.uid,...a})):e((0,m.gV)({uid:r.uid,email:r.email,role:"customer"}))}else e((0,m.lM)())});return()=>r()},[e]),{login:async(e,t)=>{await (0,C.x9)(f.j,e,t)},signup:async(e,t)=>{let r=(await (0,C.eJ)(f.j,e,t)).user;await (0,P.BN)((0,P.H9)(f.db,"users",r.uid),{uid:r.uid,email:r.email,role:"customer"})},logout:()=>{e((0,m.y4)())}}};var w=r(30570),N=r(85716),S=r.n(N);function k(){let e=(0,i.wA)(),t=(0,i.d4)(e=>e.auth.user),{logout:r}=A();return(0,a.jsxs)("div",{className:S().userControls,children:[(0,a.jsxs)(w.A,{variant:"primary",size:"s",children:[(0,a.jsx)(_.Cab,{}),"Contact Us"]}),(0,a.jsx)(w.A,{variant:"secondary",size:"s",onClick:()=>{e((0,u.n)())},children:(0,a.jsx)(_.AsH,{})}),t?(0,a.jsx)(w.A,{variant:"secondary",size:"s",onClick:r,children:(0,a.jsx)(_.axc,{})}):(0,a.jsx)(w.A,{variant:"secondary",size:"s",onClick:()=>{t||e((0,m.eK)("login"))},children:(0,a.jsx)(_.x$1,{})})]})}var I=r(40296),D=r.n(I);function H(){let e=(0,y.usePathname)(),{isAdmin:t}=(0,j.A)();return console.log("Redux user:",(0,i.d4)(e=>e.auth.user)),console.log("Header - isAdmin:",t),(0,a.jsx)("header",{className:D().header,children:(0,a.jsxs)("div",{className:D().container,children:[(0,a.jsxs)("div",{className:D().navContainer,children:[(0,a.jsx)(g(),{href:"/",className:D().logo,children:(0,a.jsx)(v.default,{src:"/fixmobile_logo.svg",alt:"FixMobile Logo",width:120,height:40,priority:!0})}),(0,a.jsxs)("nav",{className:D().nav,children:[(0,a.jsx)("a",{href:"https://serviss.fixmobile.lv/",className:D().navLink,target:"_blank",rel:"noopener noreferrer",children:"Serviss"}),(0,a.jsx)(g(),{href:"/shop",className:`${D().navLink} ${"/shop"===e?D().active:""}`,children:"Shop"}),t&&(0,a.jsx)(g(),{href:"/admin",className:`${D().navLink} ${"/admin"===e?D().active:""}`,children:"Admin"})]})]}),(0,a.jsx)(k,{})]})})}var M=r(18792),z=r.n(M);function B(){let{login:e}=A(),[t,r]=(0,s.useState)(""),[n,o]=(0,s.useState)(""),[i,l]=(0,s.useState)(null),[d,c]=(0,s.useState)(!1),u=async r=>{r.preventDefault(),l(null),c(!0);try{await e(t,n)}catch(e){l(e.message||"Login failed.")}finally{c(!1)}};return(0,a.jsxs)("form",{className:z().loginForm,onSubmit:u,children:[(0,a.jsxs)("div",{className:z().formGroup,children:[(0,a.jsx)("label",{children:"Email"}),(0,a.jsx)("input",{type:"email",value:t,onChange:e=>r(e.target.value),required:!0})]}),(0,a.jsxs)("div",{className:z().formGroup,children:[(0,a.jsx)("label",{children:"Password"}),(0,a.jsx)("input",{type:"password",value:n,onChange:e=>o(e.target.value),required:!0})]}),i&&(0,a.jsx)("div",{className:z().error,children:i}),(0,a.jsx)("button",{type:"submit",className:z().submitButton,disabled:d,children:d?"Logging in...":"Log In"})]})}let q=()=>{let{signup:e}=A(),[t,r]=(0,s.useState)(""),[n,o]=(0,s.useState)(""),[i,l]=(0,s.useState)(""),[d,c]=(0,s.useState)(null),[u,m]=(0,s.useState)(!1),p=async r=>{if(r.preventDefault(),c(null),n!==i)return void c("Passwords do not match.");m(!0);try{await e(t,n)}catch(e){c(e.message||"Signup failed.")}finally{m(!1)}};return(0,a.jsxs)("form",{className:z().loginForm,onSubmit:p,children:[(0,a.jsxs)("div",{className:z().formGroup,children:[(0,a.jsx)("label",{children:"Email"}),(0,a.jsx)("input",{type:"email",value:t,onChange:e=>r(e.target.value),required:!0})]}),(0,a.jsxs)("div",{className:z().formGroup,children:[(0,a.jsx)("label",{children:"Password"}),(0,a.jsx)("input",{type:"password",value:n,onChange:e=>o(e.target.value),required:!0})]}),(0,a.jsxs)("div",{className:z().formGroup,children:[(0,a.jsx)("label",{children:"Confirm Password"}),(0,a.jsx)("input",{type:"password",value:i,onChange:e=>l(e.target.value),required:!0})]}),d&&(0,a.jsx)("div",{className:z().error,children:d}),(0,a.jsx)("button",{type:"submit",className:z().submitButton,disabled:u,children:u?"Creating Account...":"Sign Up"})]})},F=()=>{let e=(0,i.wA)(),{modalOpen:t,mode:r}=(0,i.d4)(e=>e.auth),n=(0,i.d4)(e=>e.auth.user);if((0,s.useEffect)(()=>{n&&e((0,m.gs)())},[n,e]),!t)return null;let o=()=>e((0,m.Uh)());return(0,a.jsx)("div",{className:z().overlay,children:(0,a.jsxs)("div",{className:z().modal,children:[(0,a.jsx)("button",{className:z().closeButton,onClick:()=>e((0,m.gs)()),children:"\xd7"}),(0,a.jsx)("h2",{children:"login"===r?"Log In":"Sign Up"}),(0,a.jsx)("div",{className:z().formArea,children:"login"===r?(0,a.jsx)(B,{}):(0,a.jsx)(q,{})}),(0,a.jsx)("div",{className:z().switchMode,children:"login"===r?(0,a.jsxs)("p",{children:["Don't have an account?"," ",(0,a.jsx)("span",{onClick:o,children:"Sign Up"})]}):(0,a.jsxs)("p",{children:["Already have an account?"," ",(0,a.jsx)("span",{onClick:o,children:"Log In"})]})})]})})};var U=r(41641),G=r.n(U);let L=()=>{let e=(0,i.wA)(),t=(0,y.useRouter)(),{items:r,totalPrice:s}=(0,i.d4)(e=>e.cart),n=(0,i.d4)(e=>e.ui.cartOpen);return(0,a.jsxs)("div",{className:`${G().cartDrawer} ${n?G().open:G().closed}`,children:[(0,a.jsxs)("div",{className:"cart-header",style:{padding:"1rem",borderBottom:"1px solid #ddd"},children:[(0,a.jsx)("h2",{style:{margin:0},children:"Your Cart"}),(0,a.jsx)("button",{onClick:()=>e((0,u.NS)()),style:{float:"right",fontSize:"1.2rem"},children:"✕"})]}),(0,a.jsx)("div",{style:{flex:1,overflowY:"auto",padding:"1rem"},children:0===r.length?(0,a.jsx)("p",{children:"Your cart is empty."}):r.map(t=>(0,a.jsxs)("div",{style:{marginBottom:"1rem"},children:[(0,a.jsx)("strong",{children:t.name}),(0,a.jsxs)("p",{children:["€",t.price.toFixed(2)]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("button",{onClick:()=>e((0,p.CG)(t.productId)),children:"−"}),(0,a.jsx)("span",{style:{margin:"0 0.5rem"},children:t.quantity}),(0,a.jsx)("button",{onClick:()=>e((0,p.o7)(t.productId)),children:"+"}),(0,a.jsx)("button",{onClick:()=>e((0,p.dt)(t.productId)),style:{marginLeft:"1rem",color:"red"},children:"Remove"})]})]},t.productId))}),(0,a.jsxs)("div",{style:{padding:"1rem",borderTop:"1px solid #ddd"},children:[(0,a.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"1rem"},children:[(0,a.jsx)("span",{children:"Total:"}),(0,a.jsxs)("strong",{children:["€",s.toFixed(2)]})]}),(0,a.jsx)("button",{onClick:()=>{e((0,u.NS)()),t.push("/shop/checkout")},disabled:0===r.length,style:{width:"100%",padding:"0.75rem",background:"black",color:"white"},children:"Proceed to Checkout"})]})]})},O={title:"FixMobile",description:"Your trusted mobile repair and parts shop."};function Q(){return(0,i.wA)(),(0,i.d4)(e=>e.cart),null}function E({children:e}){return(0,y.usePathname)(),(0,a.jsxs)("html",{lang:"en",suppressHydrationWarning:!0,children:[(0,a.jsxs)("head",{children:[(0,a.jsx)("title",{children:O.title}),(0,a.jsx)("meta",{name:"description",content:O.description})]}),(0,a.jsx)("body",{className:"antialiased",children:(0,a.jsxs)(x,{children:[(0,a.jsx)(H,{}),(0,a.jsx)("main",{className:o().mainContent,children:e}),(0,a.jsx)(L,{}),(0,a.jsx)(Q,{}),(0,a.jsx)(F,{})]})})]})}},9167:e=>{e.exports={button:"button_button__lmGUT","button--s":"button_button--s__cDdEm","button--m":"button_button--m__MQaM_","button--l":"button_button--l__PJNuo","button--primary":"button_button--primary__B5kZd","button--secondary":"button_button--secondary__L_jiz","button--disabled":"button_button--disabled__3AmQL"}},18792:e=>{e.exports={overlay:"auth-modal_overlay__gpQlL",modal:"auth-modal_modal__Rjot7",closeButton:"auth-modal_closeButton__b5iMJ",formArea:"auth-modal_formArea__kKetX",loginForm:"auth-modal_loginForm__fBnZY",formGroup:"auth-modal_formGroup__eCAn3",error:"auth-modal_error__Cpz_H",submitButton:"auth-modal_submitButton__qVEWI",switchMode:"auth-modal_switchMode__Eb9pO"}},27921:(e,t,r)=>{"use strict";r.d(t,{Ay:()=>c,Bo:()=>s,CG:()=>l,bE:()=>n,dt:()=>o,o7:()=>i,sX:()=>d});let a=(0,r(9317).Z0)({name:"cart",initialState:{items:[],totalQuantity:0,totalPrice:0},reducers:{setCart:(e,t)=>t.payload,addToCart(e,t){let r=t.payload,a=e.items.find(e=>e.productId===r.id);a?a.quantity+=1:e.items.push({productId:r.id,name:r.name,price:r.price,imageUrl:r.imageUrls?.[0]||"",quantity:1}),e.totalQuantity+=1,e.totalPrice+=r.price},removeFromCart(e,t){let r=t.payload,a=e.items.find(e=>e.productId===r);a&&(e.totalQuantity-=a.quantity,e.totalPrice-=a.price*a.quantity,e.items=e.items.filter(e=>e.productId!==r))},increaseQuantity(e,t){let r=t.payload,a=e.items.find(e=>e.productId===r);a&&(a.quantity+=1,e.totalQuantity+=1,e.totalPrice+=a.price)},decreaseQuantity(e,t){let r=t.payload,s=e.items.find(e=>e.productId===r);s&&s.quantity>1?(s.quantity-=1,e.totalQuantity-=1,e.totalPrice-=s.price):a.caseReducers.removeFromCart(e,{payload:r})},clearCart(e){e.items=[],e.totalQuantity=0,e.totalPrice=0,localStorage.removeItem("cart")}}}),{setCart:s,addToCart:n,removeFromCart:o,increaseQuantity:i,decreaseQuantity:l,clearCart:d}=a.actions,c=a.reducer},30570:(e,t,r)=>{"use strict";r.d(t,{A:()=>l});var a=r(60687);r(43210);var s=r(87955),n=r.n(s),o=r(9167),i=r.n(o);function l({variant:e="primary",size:t="m",disabled:r=!1,icon:s=null,children:n=null,onClick:o}){let l=[i().button,i()[`button--${e}`],i()[`button--${t}`],r?i()["button--disabled"]:""].filter(Boolean).join(" ");return(0,a.jsxs)("button",{className:l,onClick:o,disabled:r,children:[s&&(0,a.jsx)("span",{className:i().button__icon,children:s}),n&&(0,a.jsx)("span",{className:i().button__text,children:n})]})}l.propTypes={variant:n().oneOf(["primary","secondary"]),size:n().oneOf(["s","m","l"]),disabled:n().bool,icon:n().node,children:n().node,onClick:n().func},l.defaultProps={variant:"primary",size:"m",disabled:!1,icon:null,children:null,onClick:()=>{}}},31847:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});var a=r(54864);let s=()=>{let e=(0,a.d4)(e=>e.auth.user),t=(0,a.d4)(e=>e.auth.loading),r=!!e,s=e?.role==="admin";return{user:e,isLoggedIn:r,isAdmin:s,loading:t}}},32593:(e,t,r)=>{"use strict";r.d(t,{Ay:()=>p,Uh:()=>c,eK:()=>l,gV:()=>u,gs:()=>d,lM:()=>m,y4:()=>h});var a=r(9317),s=r(27921),n=r(1429),o=r(762);let i=(0,a.Z0)({name:"auth",initialState:{modalOpen:!1,mode:"login",user:null,loading:!0},reducers:{openAuthModal:(e,t)=>{e.modalOpen=!0,e.mode=t.payload||"login"},closeAuthModal:e=>{e.modalOpen=!1},toggleAuthMode:e=>{e.mode="login"===e.mode?"signup":"login"},setUser:(e,t)=>{e.user=t.payload,e.loading=!1},clearUser:e=>{e.user=null,e.loading=!1}}}),{openAuthModal:l,closeAuthModal:d,toggleAuthMode:c,setUser:u,clearUser:m}=i.actions,p=i.reducer,h=()=>async e=>{try{localStorage.removeItem("cart"),await (0,n.CI)(o.j),e((0,s.sX)()),e(m())}catch(e){console.error("Logout failed:",e)}}},36100:(e,t,r)=>{Promise.resolve().then(r.bind(r,4016))},39769:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>a});let a=(0,r(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"C:\\\\Users\\\\37128\\\\Desktop\\\\FixMobile\\\\fix-mobile\\\\src\\\\app\\\\layout.jsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\Users\\37128\\Desktop\\FixMobile\\fix-mobile\\src\\app\\layout.jsx","default")},40296:e=>{e.exports={header:"Header_header__OYRYG",container:"Header_container__DjS6x",navContainer:"Header_navContainer__hjz2M",logo:"Header_logo__X4_yA",nav:"Header_nav__BVHdh",active:"Header_active__i2V1Y",userControls:"Header_userControls__qFFV5"}},41641:e=>{e.exports={cartDrawer:"Cart_cartDrawer__j8xgk",open:"Cart_open__1e8ql",closed:"Cart_closed__Ikz13"}},42357:(e,t,r)=>{"use strict";r.d(t,{Ay:()=>d,NS:()=>i,n:()=>l,n2:()=>o});let a=(0,r(9317).Z0)({name:"ui",initialState:{modalOpen:!1,editingProduct:null,cartOpen:!1},reducers:{openModal(e,t){e.modalOpen=!0,e.editingProduct=t.payload||null},closeModal(e){e.modalOpen=!1,e.editingProduct=null},openCart(e){e.cartOpen=!0},closeCart(e){e.cartOpen=!1},toggleCart(e){e.cartOpen=!e.cartOpen}}}),{openModal:s,closeModal:n,openCart:o,closeCart:i,toggleCart:l}=a.actions,d=a.reducer},54676:e=>{e.exports={layoutContainer:"layout_layoutContainer__JNMQ0",mainContent:"layout_mainContent__ssvon"}},55603:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,86346,23)),Promise.resolve().then(r.t.bind(r,27924,23)),Promise.resolve().then(r.t.bind(r,35656,23)),Promise.resolve().then(r.t.bind(r,40099,23)),Promise.resolve().then(r.t.bind(r,38243,23)),Promise.resolve().then(r.t.bind(r,28827,23)),Promise.resolve().then(r.t.bind(r,62763,23)),Promise.resolve().then(r.t.bind(r,97173,23))},78158:()=>{},82948:(e,t,r)=>{Promise.resolve().then(r.bind(r,39769))},85716:e=>{e.exports={userControls:"UserControls_userControls___Hrf4"}},96687:(e,t,r)=>{"use strict";r.d(t,{A:()=>i,j:()=>o});var a=r(9317),s=r(75535),n=r(762);let o=(0,a.zD)("categories/fetchCategories",async()=>(await (0,s.GG)((0,s.rJ)(n.db,"Devices"))).docs.map(e=>({id:e.id,...e.data()}))),i=(0,a.Z0)({name:"categories",initialState:{items:[],loading:!1,error:null},reducers:{},extraReducers:e=>{e.addCase(o.pending,e=>{e.loading=!0,e.error=null}).addCase(o.fulfilled,(e,t)=>{e.loading=!1,e.items=t.payload}).addCase(o.rejected,(e,t)=>{e.loading=!1,e.error=t.error.message})}}).reducer}};