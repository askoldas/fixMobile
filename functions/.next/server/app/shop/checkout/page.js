(()=>{var e={};e.id=60,e.ids=[60],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},19771:e=>{"use strict";e.exports=require("process")},21820:e=>{"use strict";e.exports=require("os")},22302:e=>{e.exports={checkoutGrid:"checkout_checkoutGrid___TeT6",formColumn:"checkout_formColumn__zxvy2",form:"checkout_form__YG4Wl",subtext:"checkout_subtext__T8sXS",nameRow:"checkout_nameRow__NzOWg",row:"checkout_row__1Ydw6",checkboxWrapper:"checkout_checkboxWrapper__u3FoR",cartSummary:"checkout_cartSummary__kErFj",total:"checkout_total__m0iiT",error:"checkout_error__X_Z5T"}},26350:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>o.a,__next_app__:()=>d,pages:()=>p,routeModule:()=>u,tree:()=>c});var s=r(65239),i=r(48088),a=r(88170),o=r.n(a),n=r(30893),l={};for(let e in n)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>n[e]);r.d(t,l);let c={children:["",{children:["shop",{children:["checkout",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,33232)),"C:\\Users\\37128\\Desktop\\FixMobile\\fix-mobile\\src\\app\\shop\\checkout\\page.jsx"]}]},{}]},{metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,39769)),"C:\\Users\\37128\\Desktop\\FixMobile\\fix-mobile\\src\\app\\layout.jsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,p=["C:\\Users\\37128\\Desktop\\FixMobile\\fix-mobile\\src\\app\\shop\\checkout\\page.jsx"],d={require:r,loadChunk:()=>Promise.resolve()},u=new s.AppPageRouteModule({definition:{kind:i.RouteKind.APP_PAGE,page:"/shop/checkout/page",pathname:"/shop/checkout",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},27910:e=>{"use strict";e.exports=require("stream")},28354:e=>{"use strict";e.exports=require("util")},29021:e=>{"use strict";e.exports=require("fs")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33232:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});let s=(0,r(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"C:\\\\Users\\\\37128\\\\Desktop\\\\FixMobile\\\\fix-mobile\\\\src\\\\app\\\\shop\\\\checkout\\\\page.jsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\Users\\37128\\Desktop\\FixMobile\\fix-mobile\\src\\app\\shop\\checkout\\page.jsx","default")},33873:e=>{"use strict";e.exports=require("path")},34631:e=>{"use strict";e.exports=require("tls")},37366:e=>{"use strict";e.exports=require("dns")},38422:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>u});var s=r(60687),i=r(43210),a=r(54864),o=r(27921),n=r(16189),l=r(75535),c=r(762),p=r(22302),d=r.n(p);function u(){let e=(0,a.wA)(),t=(0,n.useRouter)(),r=(0,a.d4)(e=>e.cart);(0,a.d4)(e=>e.auth.user);let[p,u]=(0,i.useState)(!0),[m,h]=(0,i.useState)({firstName:"",lastName:"",email:"",phone:"",country:"Latvia",street:"",apartment:"",city:"",municipality:"",postalCode:"",shippingAddress:""}),[x,f]=(0,i.useState)(null),[v,g]=(0,i.useState)(!1),y=e=>{let[t,r,s,i]=e.split(",").map(e=>e.trim());return{street:t,city:r,zip:s,country:i}},b=e=>{let{name:t,value:r}=e.target;h(e=>({...e,[t]:r}))},_=async s=>{if(s.preventDefault(),!m.firstName||!m.lastName||!m.email||!m.phone||!m.street||!m.city||!m.postalCode)return void f("Please fill in all required billing fields.");if(!p&&!m.shippingAddress)return void f('Please enter a delivery address or check "Same as billing address".');if(0===r.items.length)return void f("Your cart is empty.");let i={country:m.country,street:m.street,apartment:m.apartment,city:m.city,municipality:m.municipality,zip:m.postalCode},a=p?i:y(m.shippingAddress),n=`${m.firstName} ${m.lastName}`;g(!0);try{await (0,l.gS)((0,l.rJ)(c.db,"orders"),{contactInfo:{name:n,email:m.email,phone:m.phone},legalAddress:i,deliveryAddress:a,items:r.items,totalPrice:r.totalPrice,createdAt:(0,l.O5)(),status:"pending"}),e((0,o.sX)()),t.push("/shop")}catch(e){console.error("Order submission failed:",e),f("Something went wrong. Please try again.")}finally{g(!1)}};return(0,s.jsxs)("div",{className:d().checkoutGrid,children:[(0,s.jsxs)("div",{className:d().formColumn,children:[(0,s.jsx)("h2",{children:"Contact Information"}),(0,s.jsx)("p",{className:d().subtext,children:"We’ll use this email to send you details and updates about your order."}),(0,s.jsxs)("form",{onSubmit:_,className:d().form,children:[(0,s.jsx)("input",{type:"email",name:"email",placeholder:"Email address",value:m.email,onChange:b}),(0,s.jsx)("h3",{children:"Billing address"}),(0,s.jsx)("select",{name:"country",value:m.country,onChange:b,children:(0,s.jsx)("option",{value:"Latvia",children:"Latvia"})}),(0,s.jsxs)("div",{className:d().nameRow,children:[(0,s.jsx)("input",{name:"firstName",placeholder:"First name",value:m.firstName,onChange:b}),(0,s.jsx)("input",{name:"lastName",placeholder:"Last name",value:m.lastName,onChange:b})]}),(0,s.jsx)("input",{name:"street",placeholder:"Address",value:m.street,onChange:b}),(0,s.jsx)("input",{name:"apartment",placeholder:"Apartment, suite, etc.",value:m.apartment,onChange:b}),(0,s.jsxs)("div",{className:d().row,children:[(0,s.jsx)("input",{name:"city",placeholder:"City",value:m.city,onChange:b}),(0,s.jsx)("input",{name:"municipality",placeholder:"Municipality (optional)",value:m.municipality,onChange:b})]}),(0,s.jsxs)("div",{className:d().row,children:[(0,s.jsx)("input",{name:"postalCode",placeholder:"Postal code",value:m.postalCode,onChange:b}),(0,s.jsx)("input",{name:"phone",placeholder:"Phone",value:m.phone,onChange:b})]}),(0,s.jsx)("h3",{children:"Shipping address"}),(0,s.jsxs)("div",{className:d().checkboxWrapper,children:[(0,s.jsx)("input",{id:"sameAsBilling",type:"checkbox",checked:p,onChange:()=>u(!p)}),(0,s.jsx)("label",{htmlFor:"sameAsBilling",children:"Same as billing address"})]}),!p&&(0,s.jsx)("textarea",{name:"shippingAddress",placeholder:"Shipping address (street, city, zip, country)",value:m.shippingAddress,onChange:b}),x&&(0,s.jsx)("p",{className:d().error,children:x}),(0,s.jsx)("button",{type:"submit",disabled:v,children:v?"Submitting...":"Place Order"})]})]}),(0,s.jsxs)("div",{className:d().cartSummary,children:[(0,s.jsx)("h2",{children:"Order summary"}),0===r.items.length?(0,s.jsx)("p",{children:"Your cart is empty."}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("ul",{children:r.items.map(e=>(0,s.jsxs)("li",{children:[e.name," \xd7 ",e.quantity," — €",(e.price*e.quantity).toFixed(2)]},e.productId))}),(0,s.jsxs)("p",{className:d().total,children:["Total: €",r.totalPrice.toFixed(2)]})]})]})]})}},47171:(e,t,r)=>{Promise.resolve().then(r.bind(r,38422))},55511:e=>{"use strict";e.exports=require("crypto")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},70440:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>i});var s=r(31658);let i=async e=>[{type:"image/x-icon",sizes:"16x16",url:(0,s.fillMetadataSegment)(".",await e.params,"favicon.ico")+""}]},73496:e=>{"use strict";e.exports=require("http2")},74075:e=>{"use strict";e.exports=require("zlib")},79551:e=>{"use strict";e.exports=require("url")},81630:e=>{"use strict";e.exports=require("http")},87499:(e,t,r)=>{Promise.resolve().then(r.bind(r,33232))},91645:e=>{"use strict";e.exports=require("net")},94735:e=>{"use strict";e.exports=require("events")}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[447,39,658,975],()=>r(26350));module.exports=s})();